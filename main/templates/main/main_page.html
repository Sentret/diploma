{% extends "main/base.html" %} {% load staticfiles %} {% block content %}

           
<div id='grid-container'>

</div>
{% include "main/rightside_menu.html" %}
<script type="text/javascript">

 $('#search-option').change(function(){
    length = $("#search-option option:selected").text().length
    $(this).width(17+ length*9); 
 });



function makeRequest()
{

	var keyword = document.getElementById('search').value
	var sort_option = document.getElementById('select')
	sort_option = sort_option.options[sort_option.selectedIndex].value;
    
    var category = document.getElementById('search-option')
    category = category.options[category.selectedIndex].text
    

    // categories = document.getElementsByClassName('category-span-active')
    // categories = Array.prototype.slice.call( categories)
    // categories = categories.map(function(el){return el.innerText})
    



	 $.ajax({
        url: 'eventsjson',
        method: 'GET',
        data: 
        {
        	keyword: keyword,
        	sort_option:sort_option,
            category:category
            
        }    
    }).done(function(data) {
        document.getElementById('grid-container').innerHTML = data['html']
    });
}

$(document).ready(function() {
     length = $("#search-option option:selected").text().length
    $('#search-option').width(17+ length*9); 
   makeRequest()
});


</script>
{% endblock content %}